<?xml version="1.0" encoding="UTF-8"?>
<OperationDefinition xmlns="http://hl7.org/fhir">
	<id value="CPIS-GetBundle-Operation"/>  
	<url value="https://fhir.nhs.uk/R4/OperationDefinition/CPIS-GetBundle-Operation"/>
		<meta>
		<lastUpdated value="2017-11-21T00:00:00+01:00"/>
	</meta>
	<name value="CPIS-GetBundle-Operation"/>
	<status value="draft"/>
	<kind value="operation"/>
	<date value="2021-03-08"/>
	<publisher value="NHS Digital"/>
	<contact>
		<name value="Interoperability Team"/>
		<telecom>
			<system value="email"/>
			<value value="interoperabilityteam@nhs.net"/>
			<use value="work"/>
		</telecom>
	</contact>
	<description value="Get all CP-IS care plans and associated records for a specified patient by NHS number."/>
	<code value="cpis.getBundle"/>
	<resource value="Organization"/>
	<resource value="Patient"/>
	<resource value="Practitioner"/>
	<resource value="PractitionerRole"/>
	<system value="false"/>
	<type value="true"/>
	<instance value="false"/>
	<parameter>
		<name value="patientNHSNumber"/>
		<use value="in"/>
		<min value="1"/>
		<max value="1"/>
		<documentation value="The NHS number of the patient whose records are being extracted, which must be traced or verified against the national demographics index."/>
		<type value="Identifier"/>
	</parameter>
	<parameter>
		<name value="responsiblePerson"/>
		<use value="in"/>
		<min value="0"/>
		<max value="1"/>
		<documentation value="The required details of the person nominated to be responsible for CP-IS queries where the query author is a device."/>
		<part>
			<name value="jobRoleCode"/>
			<use value="in"/>
			<min value="1"/>
			<max value="1"/>
			<documentation value="The job role code of the person nominated to be responsible for CP-IS queries where the query author is a device."/>
			<type value="CodeableConcept"/>
			<binding>
				<strength value="required"/>
				<valueSet value="https://fhir.hl7.org.uk/ValueSet/UKCore-SDSJobRoleName"/>
			</binding>
		</part>
		<part>
			<name value="jobRoleName"/>
			<use value="in"/>
			<min value="1"/>
			<max value="1"/>
			<documentation value="The job role name of the person nominated to be responsible for CP-IS queries where the query author is a device."/>
			<type value="CodeableConcept"/>
			<binding>
				<strength value="required"/>
				<valueSet value="https://fhir.hl7.org.uk/ValueSet/UKCore-SDSJobRoleName"/>
			</binding>
		</part>
		<part>
			<name value="familyName"/>
			<use value="in"/>
			<min value="1"/>
			<max value="1"/>
			<documentation value="The family name of the person nominated to be responsible for CP-IS queries where the query author is a device."/>
			<type value="string"/>
		</part>
		<part>
			<name value="givenName"/>
			<use value="in"/>
			<min value="1"/>
			<max value="*"/>
			<documentation value="The given name of the person nominated to be responsible for CP-IS queries where the query author is a device."/>
			<type value="string"/>
		</part>
		<part>
			<name value="prefix"/>
			<use value="in"/>
			<min value="1"/>
			<max value="1"/>
			<documentation value="The prefix of the name of the person nominated to be responsible for CP-IS queries where the query author is a device."/>
			<type value="string"/>
		</part>
		<part>
			<name value="suffix"/>
			<use value="in"/>
			<min value="0"/>
			<max value="1"/>
			<documentation value="The suffix name of the person nominated to be responsible for CP-IS queries where the query author is a device."/>
			<type value="string"/>
		</part>
		<part>
			<name value="nameUse"/>
			<use value="in"/>
			<min value="0"/>
			<max value="1"/>
			<documentation value="The use of the name of the person nominated to be responsible for CP-IS queries where the query author is a device."/>
			<type value="code"/>
			<binding>
				<strength value="required"/>
				<valueSet value="http://hl7.org/fhir/ValueSet/name-use"/>
			</binding>
		</part>
		<part>
			<name value="nameValidTimeStart"/>
			<use value="in"/>
			<min value="0"/>
			<max value="1"/>
			<documentation value="The start time of the period of time when the name of the person was valid."/>
			<type value="dateTime"/>
		</part>
		<part>
			<name value="nameValidTimeEnd"/>
			<use value="in"/>
			<min value="0"/>
			<max value="1"/>
			<documentation value="The end time of the period of time when the name of the person was valid."/>
			<type value="dateTime"/>
		</part>
	</parameter>
	<parameter>
		<name value="patientPhysicalLocation"/>
		<use value="in"/>
		<min value="0"/>
		<max value="1"/>
			<documentation value="The ODS organisation or site code and organisation name of the physical location of the patient."/>
				<type value="string"/>
	</parameter>
	<parameter>
		<name value="safeguardingLeadAtPhysicalLocation"/>
		<use value="in"/>
		<min value="0"/>
		<max value="1"/>
			<part>
			<name value="jobRoleCode"/>
			<use value="in"/>
			<min value="1"/>
			<max value="1"/>
			<documentation value="The job role code of the person nominated as the Safeguarding Lead at the patient's physical location."/>
			<type value="CodeableConcept"/>
			<binding>
				<strength value="required"/>
				<valueSet value="https://fhir.hl7.org.uk/ValueSet/UKCore-SDSJobRoleName"/>
			</binding>
		</part>
		<part>
			<name value="jobRoleName"/>
			<use value="in"/>
			<min value="1"/>
			<max value="1"/>
			<documentation value="The job role name of the person nominated as the Safeguarding Lead at the patient's physical location."/>
			<type value="CodeableConcept"/>
			<binding>
				<strength value="required"/>
				<valueSet value="https://fhir.hl7.org.uk/ValueSet/UKCore-SDSJobRoleName"/>
			</binding>
		</part>
		<part>
			<name value="familyName"/>
			<use value="in"/>
			<min value="1"/>
			<max value="1"/>
			<documentation value="The family name of the person nominated as the Safeguarding Lead at the patient's physical location."/>
			<type value="string"/>
		</part>
		<part>
			<name value="givenName"/>
			<use value="in"/>
			<min value="1"/>
			<max value="*"/>
			<documentation value="The given name of the person nominated as the Safeguarding Lead at the patient's physical location."/>
			<type value="string"/>
		</part>
		<part>
			<name value="prefix"/>
			<use value="in"/>
			<min value="1"/>
			<max value="1"/>
			<documentation value="The prefix of the name of the person nominated as the Safeguarding Lead at the patient's physical location."/>
			<type value="string"/>
		</part>
		<part>
			<name value="suffix"/>
			<use value="in"/>
			<min value="0"/>
			<max value="1"/>
			<documentation value="The suffix name of the person nominated as the Safeguarding Lead at the patient's physical location."/>
			<type value="string"/>
		</part>
		<part>
			<name value="nameUse"/>
			<use value="in"/>
			<min value="0"/>
			<max value="1"/>
			<documentation value="The use of the name of the person nominated as the Safeguarding Lead at the patient's physical location."/>
			<type value="code"/>
			<binding>
				<strength value="required"/>
				<valueSet value="http://hl7.org/fhir/ValueSet/name-use"/>
			</binding>
		</part>
		<part>
			<name value="nameValidTimeStart"/>
			<use value="in"/>
			<min value="0"/>
			<max value="1"/>
			<documentation value="The start time of the period of time when the name of the nominated Safeguarding Lead at the patient's physical location was valid."/>
			<type value="dateTime"/>
		</part>
				<part>
			<name value="nameValidTimeEnd"/>
			<use value="in"/>
			<min value="0"/>
			<max value="1"/>
			<documentation value="The start time of the period of time when the name of the nominated Safeguarding Lead at the patient's physical location was valid."/>
			<type value="dateTime"/>
		</part>
		<part>
			<name value="telephone"/>
			<use value="in"/>
			<min value="0"/>
			<max value="1"/>
			<documentation value="The telephone number of the nominated Safeguarding Lead at the patient's physical location."/>
			<type value="string"/>
		</part>
	</parameter>
		<parameter>
		<name value="response"/>
		<use value="out"/>
		<min value="1"/>
		<max value="1"/>
		<documentation value="The searchset bundle resource that has been returned in response to the given input parameters."/>
		<type value="Reference"/>
		<targetProfile value="https://fhir.hl7.org.uk/StructureDefinition/UKCore-Bundle"/>
		</parameter>
</OperationDefinition>
